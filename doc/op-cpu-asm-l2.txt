#  Copyright 2015 Robert Elder Software Inc.  All rights reserved.
#
#  This specification is not currently available under any license, and
#  unauthorized use or copying is not permitted.
#
#  This specification will likely be available under a common open source
#  license in the near future.  Licensing is currently pending feedback from
#  a lawyer.  If you have an opinion on this subject you can send it to
#  recc [at] robertelder.org.
#
#  This specification comes with ABSOLUTELY NO WARRANTY.  In no event shall
#  Robert Elder Software Inc. be liable for incidental or consequential damages
#  in connection with use of this specification.

            One-Page CPU L2 Assembly Language Syntax Specification

The L2 assembly language is meant to augment the L1 language in such a way that
any conforming L1 file is also an L2 file, but not every L2 file is an L1 file.
The L2 language allows for statements that specify linkage information,
comments, relaxed whitespace constraints, and program offsets that are defined
relatively.  This specification references and augments definitions from the
"One-Page CPU L1 Assembly Language Syntax Specification".

1.  A "space" is redefined from the L1 specification to be exactly one of the
following:

  1.1  ASCII character 32 (a traditional 'space').
  1.2  ASCII character 9 (a 'tab').

2.  An "offset declaration" is redefined from the L1 specification to be one of
the following:

  2.1  The word "OFFSET", followed by a hexidecimal constant.
  2.2  The word "OFFSET", followed by "RELOCATABLE"

3.  A "comment" is defined as the character ";" followed by any number of any
characters up to but not including one of the following:

  3.1 A newline.
  3.2 The end of the file.

4.  A "interface specifier list" is defined as one of the following:

  4.1  "REQUIRES"
  4.2  "IMPLEMENTS"
  4.3  "REQUIRES" followed by zero or more spaces, followed by ",", followed
by zero or more spaces, followed by "IMPLEMENTS".
  4.4  "IMPLEMENTS" followed by zero or more spaces, followed by ",", followed
by zero or more spaces, followed by "REQUIRES".

5.  A "linkage domain" is defined as one of the following:

  5.1  "INTERNAL"
  5.2  "EXTERNAL"

6.  A "symbol identifier" is defined as one of any character from 6.1, 6.2 or
6.3 followed by zero or more of any character from 6.1, 6.2, 6.3, or 6.4.

  6.1  Any character between or including "a" to "z".
  6.2  Any character between or including "A" to "Z".
  6.3  Character "_"
  6.4  A decimal digit.

7.  A "symbol linkage declaration" is defined as an interface specifier list,
followed by zero or more spaces, followed by a linkage domain, followed by zero
or more spaces, followed by a symbol identifier.

8.  Section 11.5 of the L1 specification is redefined to be one of the
following:

  8.1  "beq", "space", "aggregate register", "space", "aggregate register",
"space", "decimal constant" 
  8.2  "beq", "space", "aggregate register", "space", "aggregate register",
"space", "symbol identifier"

9.  Section 11.6 of the L1 specification is redefined to be one of the
following:

  9.1  "blt", "space", "aggregate register", "space", "aggregate register",
"space", "decimal constant" 
  9.2  "blt", "space", "aggregate register", "space", "aggregate register",
"space", "symbol identifier"

10.  Section 11.14 of the L1 specification is redefined to be one of the
following:

  10.1  "ll", "space", "aggregate register", "space", "hexadecimal constant"
  10.2  "ll", "space", "aggregate register", "space", "symbol identifier"

11.  Section 11.15 of the L1 specification is redefined to be one of the
following:

  11.1  "dw", "space", "hexadecimal constant"
  11.2  "dw", "space", "symbol identifier"

12.  A "symbol label" is defined as a symbol identifier, followed by zero or
more spaces, followed by a ":" character.

13.  A "statement" is defined as one of the following:

  13.1  An instruction statement.
  13.2  A symbol linkage declaration.
  13.2  A symbol label.

14.  A "conforming One-Page CPU L2 file" is defined as a file containing an
offset declaration, followed by zero or more of the following:

  14.1 A newline followed by zero or more spaces, followed by a statement,
followed by zero or more spaces, followed by zero or one comment.
  14.2 A newline followed by zero or more spaces, followed by zero or one
comment.

An optional additional newline can be the last character in the file.

15.  Any instance of a single space mentioned in the L2 specification or the
L1 specification may be expanded to include one or more spaces using the
definition of a space in section 1 of this document.

The sha1sum of the lines above is 1d5b4c3a8eb58616bd9d15cf9265049030410adb
