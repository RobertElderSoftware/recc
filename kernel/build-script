PREPROCESS kernel/assert.c TO kernel/assert.i
CODE GENERATE kernel/assert.i TO kernel/assert.l2

PREPROCESS kernel/putchar.c TO kernel/putchar.i
CODE GENERATE kernel/putchar.i TO kernel/putchar.l2

PREPROCESS kernel/main.c TO kernel/main.i
CODE GENERATE kernel/main.i TO kernel/main.l2

PREPROCESS kernel/queue.c TO kernel/queue.i
CODE GENERATE kernel/queue.i TO kernel/queue.l2

PREPROCESS kernel/kernel_state.c TO kernel/kernel_state.i
CODE GENERATE kernel/kernel_state.i TO kernel/kernel_state.l2

PREPROCESS kernel/kernel_impl.c TO kernel/kernel_impl.i
CODE GENERATE kernel/kernel_impl.i TO kernel/kernel_impl.l2

PREPROCESS kernel/user_proc.c TO kernel/user_proc.i
CODE GENERATE kernel/user_proc.i TO kernel/user_proc.l2
LINK kernel/assert.l2, kernel/putchar_nobusy.l2, kernel/getchar_nobusy.l2, kernel/putchar.l2, kernel/kernel_state.l2, kernel/user_proc.l2, kernel/kernel_interface.l2, kernel/main.l2, kernel/queue.l2, builtin/signed_greater_than_or_equal_to.l2, builtin/signed_less_than_or_equal_to.l2, builtin/print_decimal.l2, stdlib/printf.l2, kernel/kernel_impl.l2 TO kernel/kernel.l1 SYMBOLS TO kernel/kernel.sym
